<!DOCTYPE html>
<html>
  <head>
<meta charset="UTF-8">
<!-- See http://architects.dzone.com/articles/sample-java-web-socket-client-->
<title>Web-Terminal</title>
<style type="text/css">
  html, body { width: 100%; height: 100% ; margin: 0px; overflow: hidden }
  div[class="domterm"] { width: 100%; height: 100%; overflow-y: scroll; overflow-x: hidden; font-family: monospace;  margin: 0px; padding: 0px; border: 0px; white-space: pre }
  span[class="wrap"] {padding: 0px; margin: 0x; font-family: monospace; white-space: nowrap }
  span[line="soft"] { padding: 0px; margin: 0x; font: monospace medium; }
  dummy {white-space: pre-wrap; word-break: break-all}
  span[std="output"] { }
  span[std="error"] { color: red; }
  span[std="prompt"] { color: green; margin: 0px; padding: 0px; border: 1px }
  span[std="input"] { font-weight: bolder; color: blue }
  input[std="input"] { font-weight: bolder; }
  input[std="input"] {
    border: 0px;
    margin: 0px;
    padding: 0px;
    right: 0px;
    width: auto;
    left: auto;
  }
</style>
<script type="text/javascript" src="ResizeSensor.js"> </script>
<script type="text/javascript" src="terminal.js"> </script>
<script type="text/javascript">
var wt;
var wsocket;

function socketSendChars(str) {
    wsocket.send(str);
}
           
function onMessage(evt) {
    wt.insertString(evt.data);
}

function connect() {
    wt = new DomTerm("term1");
    wt.processInputCharacters = socketSendChars;
    var bodyNode = document.getElementsByTagName("div")[0];
    wsocket = new WebSocket("ws://localhost:8025/websocket/replsrv");
    wsocket.onmessage = onMessage;
    wsocket.onopen = function(e) { wt.initializeTerminal(bodyNode); };
}

window.addEventListener("load", connect, false);

</script>
</head>
<body><div class="domterm" id="term1"></div></body>
</html>
